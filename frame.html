<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ“¸ ì‚¬ì§„ + í”„ë ˆì„ ì„ íƒ</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { width: 100%; height: 100%; }
  body {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    background: #111;
    color: #fff;
    font-family: 'Noto Sans KR', sans-serif;
    padding: 10px;
    gap: 20px;
    overflow: hidden;
  }

  /* ì™¼ìª½: ì„ íƒí•œ ì‚¬ì§„ 4ì¥ */
  .photo-list {
    flex: 0 0 140px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    overflow-y: auto;
    border-right: 1px solid #555;
    padding: 5px;
    height: 95vh;
  }
  .photo-list img {
    width: 100%;
    border-radius: 8px;
    cursor: pointer;
  }

  /* ì¤‘ì•™: í”„ë ˆì„ + ì‚¬ì§„ ìŠ¬ë¡¯ */
  .frame-display-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .frame-display {
    position: relative;
    width: 650px;
    height: 950px;
    border: 2px solid #fff;
    border-radius: 10px;
    background: #222;
    overflow: hidden;
  }

  .slot {
    position: absolute;
    border: 1px dashed rgba(255,255,255,0.5);
    cursor: pointer;
    overflow: hidden;
    border-radius: 3px;
  }
  .slot1 { top: 7%; left: 5.8%; width: 41.7%; height: 37.5%; }
  .slot2 { top: 14%; left: 53.3%; width: 41%; height: 37.5%; }
  .slot3 { top: 48.3%; left: 5.7%; width: 41.7%; height: 37.6%; }
  .slot4 { top: 55.5%; left: 53.3%; width: 41%; height: 37.5%; }

  .slot img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    user-select: none;
    touch-action: none;
  }

  .frame-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  /* ì˜¤ë¥¸ìª½: í”„ë ˆì„ ì„ íƒ */
  .frame-selector {
    flex: 0 0 160px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    overflow-y: auto;
    height: 95vh;
  }
  .frame-selector img {
    width: 100%;
    border: 3px solid transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s, border 0.2s;
  }
  .frame-selector img:hover { transform: scale(1.05); }
  .frame-selector img.selected { border: 3px solid #00ccff; }
</style>
</head>
<body>

  <!-- ì™¼ìª½: ì„ íƒí•œ ì‚¬ì§„ 4ì¥ -->
  <div class="photo-list" id="photoList"></div>

  <!-- ì¤‘ì•™: í”„ë ˆì„ + ìŠ¬ë¡¯ -->
  <div class="frame-display-container">
    <div class="frame-display" id="frameDisplay">
      <div class="slot slot1"></div>
      <div class="slot slot2"></div>
      <div class="slot slot3"></div>
      <div class="slot slot4"></div>
    </div>
  </div>

  <!-- ì˜¤ë¥¸ìª½: í”„ë ˆì„ ì„ íƒ -->
  <div class="frame-selector" id="frameSelector">
    <img src="frame1.png" class="frame-option" alt="í”„ë ˆì„1">
    <img src="frames/frame2.png" class="frame-option" alt="í”„ë ˆì„2">
    <img src="frames/frame3.png" class="frame-option" alt="í”„ë ˆì„3">
    <img src="frames/frame4.png" class="frame-option" alt="í”„ë ˆì„4">
  </div>

  <!-- âœ… Interact.js ì¶”ê°€ -->
  <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

<script>
  const photoList = document.getElementById('photoList');
  const frameDisplay = document.getElementById('frameDisplay');
  const slots = frameDisplay.querySelectorAll('.slot');
  let selectedFrameSrc = null;
  let selectedPhotoSrc = null;

  // âœ… ì¹´ë©”ë¼ì—ì„œ ì €ì¥ëœ ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ê¸°
  const selectedPhotos = JSON.parse(localStorage.getItem('selectedPhotos') || '[]');

  // ì™¼ìª½ ì‚¬ì§„ ëª©ë¡ í‘œì‹œ
  selectedPhotos.forEach(src => {
    const img = document.createElement('img');
    img.src = src;
    photoList.appendChild(img);

    img.addEventListener('click', () => {
      selectedPhotoSrc = src;
      photoList.querySelectorAll('img').forEach(p => p.style.outline = '');
      img.style.outline = '3px solid #00ccff';
    });
  });

  // í”„ë ˆì„ ì„ íƒ
  document.querySelectorAll('.frame-option').forEach(frame => {
    frame.addEventListener('click', () => {
      document.querySelectorAll('.frame-option').forEach(f => f.classList.remove('selected'));
      frame.classList.add('selected');
      selectedFrameSrc = frame.src;

      // ê¸°ì¡´ í”„ë ˆì„ ë®ê°œ ì œê±° í›„ ìƒˆë¡œ ì ìš©
      frameDisplay.querySelectorAll('.frame-overlay').forEach(o => o.remove());
      const overlay = document.createElement('img');
      overlay.src = selectedFrameSrc;
      overlay.classList.add('frame-overlay');
      frameDisplay.appendChild(overlay);
    });
  });

  // ìŠ¬ë¡¯ í´ë¦­ â†’ ì‚¬ì§„ ì‚½ì… / ì œê±°
  slots.forEach(slot => {
    slot.addEventListener('click', () => {
      if (slot.querySelector('img')) {
        // ì´ë¯¸ ì‚¬ì§„ ìˆìœ¼ë©´ ì œê±°
        slot.innerHTML = '';
      } else if (selectedPhotoSrc) {
        const img = document.createElement('img');
        img.src = selectedPhotoSrc;
        img.classList.add('draggable-photo');
        img.style.transform = 'translate(0px, 0px) scale(1)';
        slot.appendChild(img);
        enableDrag(img);
      }
    });
  });

  // âœ… Interact.jsë¡œ ì´ë™ + í™•ëŒ€ ê¸°ëŠ¥ í™œì„±í™”
  function enableDrag(el) {
    let scale = 1;
    let x = 0, y = 0;

    interact(el)
      .draggable({
        modifiers: [
          interact.modifiers.restrictRect({
            restriction: 'parent', // ìŠ¬ë¡¯ ë‚´ë¶€ ì œí•œ
            endOnly: true
          })
        ],
        listeners: {
          move(event) {
            x += event.dx;
            y += event.dy;
            el.style.transform = `translate(${x}px, ${y}px) scale(${scale})`;
          }
        }
      });

    // ë§ˆìš°ìŠ¤ íœ  í™•ëŒ€/ì¶•ì†Œ
    el.addEventListener('wheel', (e) => {
      e.preventDefault();
      const delta = e.deltaY < 0 ? 0.1 : -0.1;
      scale = Math.min(Math.max(0.5, scale + delta), 3); // 0.5~3ë°° ì‚¬ì´
      el.style.transform = `translate(${x}px, ${y}px) scale(${scale})`;
    });
  }
</script>
</body>
</html>